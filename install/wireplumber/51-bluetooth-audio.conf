# Disable logind integration for headless service operation
# Allows Bluetooth to work without a logged-in user session
wireplumber.profiles = {
  main = {
    monitor.bluez.seat-monitoring = disabled
  }
}

# Prefer headset-head-unit profile for Bluetooth devices
# This enables both microphone and speaker (HSP/HFP) instead of
# the default of high-quality playback only (A2DP)
monitor.bluez.rules = [
  {
    matches = [
      {
        # Match all bluetooth devices
        device.name = "~bluez_card.*"
      }
    ]
    actions = {
      update-props = {
        bluez5.auto-connect = [ hfp_hf hsp_hs a2dp_sink ]
        device.profile = "headset-head-unit"
      }
    }
  }
]
